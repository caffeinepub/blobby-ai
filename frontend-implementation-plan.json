{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Redesign to ChatGPT Mobile-Style Single-Screen Layout",
  "requirements": [
    {
      "id": "REQ-12",
      "summary": "Replace three-panel Layout with single full-screen dark layout",
      "acceptanceCriteria": [
        "No three-column panel structure exists in the rendered DOM",
        "The app fills the full viewport without any side-by-side panel splits",
        "Background color is #0D0D0D"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Remove the three-panel (sidebar, chat, preview) layout structure. Replace with a single full-screen container that uses flex column direction, fills the viewport (min-h-screen), and applies #0D0D0D background. The new structure should render: top navigation bar, main content area (welcome or messages), and bottom input bar."
        },
        {
          "path": "frontend/src/index.css",
          "operation": "modify",
          "description": "Update the root background color to #0D0D0D. Ensure the body and #root elements inherit full viewport height and the dark background."
        }
      ]
    },
    {
      "id": "REQ-13",
      "summary": "Implement top navigation bar with hamburger, title, and settings icon",
      "acceptanceCriteria": [
        "Top bar renders with three zones: left hamburger, center title, right settings icon",
        "Title reads 'Blobby AI' centered",
        "Hamburger icon is tappable and triggers the sidebar drawer",
        "Settings icon is present on the right"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/TopBar.tsx",
          "operation": "create",
          "description": "Create a new TopBar component that renders a full-width horizontal bar with three sections using flex justify-between. Left section: hamburger menu icon button (≡) that calls onMenuToggle prop. Center section: bold white 'Blobby AI' title text. Right section: settings icon button (placeholder for future functionality). Use background #111111 or similar elevated dark surface, with optional subtle violet accent underline."
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Import and render the new TopBar component at the top of the Layout. Add state to manage drawer open/closed status (e.g., isDrawerOpen). Pass a toggle handler to TopBar's onMenuToggle prop that flips the drawer state."
        }
      ]
    },
    {
      "id": "REQ-14",
      "summary": "Implement slide-in sidebar drawer for chat history",
      "acceptanceCriteria": [
        "Sidebar drawer is not visible on initial render",
        "Tapping hamburger icon causes drawer to slide in from the left with smooth CSS transition",
        "Drawer lists all existing chat sessions",
        "Tapping a session closes the drawer and loads that session",
        "A semi-transparent backdrop covers the main content while the drawer is open",
        "Tapping the backdrop or a close button dismisses the drawer"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/SidebarDrawer.tsx",
          "operation": "create",
          "description": "Create a SidebarDrawer component that wraps the existing Sidebar component logic (session list, new chat button). The drawer should be positioned fixed, off-screen left by default (transform: translateX(-100%)), and slide in smoothly (transition: transform 300ms ease) when isOpen prop is true. Include a semi-transparent dark backdrop overlay that covers the screen when open and calls onClose when clicked. Add a close button (X icon) in the drawer header."
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Replace the inline Sidebar rendering with the new SidebarDrawer component. Pass isOpen state, onClose handler, and all existing sidebar props (sessions, selectedSessionId, onSessionSelect, onNewChat, onDeleteSession). Ensure that selecting a session also closes the drawer by calling the close handler."
        },
        {
          "path": "frontend/src/components/Sidebar.tsx",
          "operation": "modify",
          "description": "Remove any width constraints or fixed positioning from Sidebar so it can be contained within the SidebarDrawer. Keep all session listing, new chat, and delete functionality unchanged."
        }
      ]
    },
    {
      "id": "REQ-15",
      "summary": "Redesign welcome screen with floating mascot, heading, and 2×2 prompt grid",
      "acceptanceCriteria": [
        "Welcome content is vertically and horizontally centered in the main area",
        "Blobby mascot image renders at 100×100px",
        "Mascot has a slow, smooth looping float animation (no abrupt jumps)",
        "Heading text reads 'What can I help with?' in bold white",
        "Four suggestion cards are displayed in a 2-column, 2-row grid",
        "Clicking a suggestion card populates and submits the message as before"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/WelcomeScreen.tsx",
          "operation": "create",
          "description": "Create a WelcomeScreen component that renders vertically and horizontally centered content. Display the Blobby mascot image (frontend/public/assets/generated/blobby-mascot.dim_400x400.png) at 100×100px with a continuous floating animation (translateY oscillation, ~3s cycle, ease-in-out infinite). Below the mascot, show the heading 'What can I help with?' in bold white text. Below the heading, render the four suggestion prompt cards in a 2×2 grid (grid-cols-2) centered on screen. Reuse the existing PromptCards component or inline the four cards with the same click behavior (populate and submit)."
        },
        {
          "path": "frontend/src/components/ChatWindow.tsx",
          "operation": "modify",
          "description": "When no messages exist (messages.length === 0), render the new WelcomeScreen component instead of the existing PromptCards. Pass the onPromptSelect callback to WelcomeScreen so clicking a suggestion card still populates and submits the message."
        },
        {
          "path": "frontend/src/index.css",
          "operation": "modify",
          "description": "Add a new @keyframes float animation that smoothly oscillates translateY (e.g., from 0 to -10px and back) over ~3 seconds with ease-in-out timing. Reference this animation in the WelcomeScreen mascot image styling."
        }
      ]
    },
    {
      "id": "REQ-16",
      "summary": "Redesign bottom input bar to span full width with updated placeholder",
      "acceptanceCriteria": [
        "Input bar stretches the full width of the screen",
        "Placeholder text is 'Message Blobby AI...'",
        "Bar is pinned/fixed to the bottom of the viewport",
        "All existing input actions (file attach, image upload, send, Enter key) continue to work",
        "Loading animation displays correctly while AI is responding"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MessageInput.tsx",
          "operation": "modify",
          "description": "Update the MessageInput component to span the full viewport width. Change the placeholder text to 'Message Blobby AI...'. Ensure the component is positioned fixed or sticky at the bottom of the viewport. Retain all existing functionality: attach file icon, upload image icon, send button, Enter-to-send, Shift+Enter for newline, loading state with 3-dot animation (LoadingIndicator), and image thumbnail preview above the bar. Verify that the input bar does not overlap the last message by applying appropriate padding to the message list container."
        },
        {
          "path": "frontend/src/components/ChatWindow.tsx",
          "operation": "modify",
          "description": "Ensure the message list container accounts for the fixed bottom input bar by adding bottom padding equal to the input bar height. This prevents the last message from being hidden behind the input."
        }
      ]
    },
    {
      "id": "REQ-17",
      "summary": "Render full-height scrollable chat messages when session is active",
      "acceptanceCriteria": [
        "When messages exist, the welcome screen is hidden and the message list is shown",
        "Message list scrolls vertically within the space between top bar and input bar",
        "User messages appear right-aligned with indigo bubble",
        "Assistant messages appear left-aligned with violet glow card",
        "Task-type pill badges remain visible on assistant messages",
        "Markdown content renders correctly"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/ChatWindow.tsx",
          "operation": "modify",
          "description": "When messages.length > 0, render the message list in a scrollable container that fills the space between the top bar and bottom input bar (use flex-1 and overflow-y-auto). Map over messages and render each with the existing ChatMessage component. Ensure the ChatMessage component styling (right-aligned user bubbles, left-aligned assistant cards with violet glow, task-type badges, markdown rendering) is preserved unchanged. The container should scroll to the bottom when new messages arrive."
        }
      ]
    },
    {
      "id": "REQ-18",
      "summary": "Display App/Game Build previews in full-screen modal overlay",
      "acceptanceCriteria": [
        "No right-side preview panel exists in the new layout",
        "AppBuild/GameBuild iframe previews open in a full-screen overlay or modal",
        "'Download HTML' button is accessible within the overlay",
        "A close button dismisses the overlay and returns to the chat"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/PreviewModal.tsx",
          "operation": "create",
          "description": "Create a PreviewModal component that renders a full-screen overlay (fixed position, z-index above chat, dark backdrop) when isOpen prop is true. Inside the modal, render the existing PreviewPanel component (or inline its iframe logic) to display the HTML content. Include the 'Download HTML' button and a close button (X icon) at the top. Clicking the close button or backdrop calls the onClose prop."
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Remove the inline PreviewPanel rendering from the three-panel layout. Instead, render the new PreviewModal component conditionally based on preview state (when preview content exists). Pass the preview content, onClose handler, and download handler to PreviewModal. Ensure the modal overlays the chat and can be dismissed."
        },
        {
          "path": "frontend/src/components/ChatWindow.tsx",
          "operation": "modify",
          "description": "When an App/Game Build task completes, call the onPreview callback with the generated HTML content (as before), which will trigger the PreviewModal to open in the parent Layout."
        }
      ]
    },
    {
      "id": "REQ-19",
      "summary": "Apply updated color scheme and smooth animations throughout",
      "acceptanceCriteria": [
        "Page background is #0D0D0D",
        "Violet accent #7C3AED is used for interactive elements, borders, and glows",
        "Text is legible white/light on the dark background",
        "Inter font is used throughout",
        "All transitions and animations are smooth with no jarring jumps"
      ],
      "file_operations": [
        {
          "path": "frontend/src/index.css",
          "operation": "modify",
          "description": "Update the global stylesheet to enforce #0D0D0D as the root background color. Ensure the violet accent #7C3AED is used for interactive elements, borders, and glows (update CSS custom properties if needed). Verify that all text is legible white or light gray on the dark background. Confirm that the Inter font is imported and applied to the body. Add or update CSS transitions for drawer slide, modal fade-in, and floating animation to ensure all are smooth (e.g., transition: transform 300ms ease, opacity 200ms ease)."
        },
        {
          "path": "frontend/src/components/PromptCards.tsx",
          "operation": "modify",
          "description": "Update the suggestion card styling to use dark surface cards with a subtle violet border or glow (#7C3AED). Ensure hover and active states have smooth transitions. Verify the cards fit well in the 2×2 grid layout of the WelcomeScreen."
        },
        {
          "path": "frontend/tailwind.config.js",
          "operation": "modify",
          "description": "Review and update the Tailwind config to ensure the violet accent (#7C3AED) is available as a custom color utility (e.g., bg-violet-600, border-violet-600). Add any missing transition or animation utilities needed for smooth drawer and modal animations."
        }
      ]
    }
  ]
}