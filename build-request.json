{
  "kind": "build_request",
  "title": "Redesign to ChatGPT Mobile-Style Single-Screen Layout",
  "projectName": "Blobby AI",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-12",
      "text": "Replace the existing three-panel Layout component with a single full-screen layout. Remove the left sidebar, center chat window, and right preview panel arrangement entirely. The new layout must occupy the full viewport height and width with a #0D0D0D dark background.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Remove the 3-panel layout completely",
          "Make it single full-screen layout"
        ]
      },
      "acceptanceCriteria": [
        "No three-column panel structure exists in the rendered DOM",
        "The app fills the full viewport without any side-by-side panel splits",
        "Background color is #0D0D0D"
      ]
    },
    {
      "id": "REQ-13",
      "text": "Implement a top navigation bar spanning the full width. The left side must contain a hamburger menu icon (≡) button that toggles the slide-in sidebar drawer. The center must display the 'Blobby AI' title in bold white text. The right side must contain a settings icon button. The bar must use a slightly elevated dark surface (#111111 or similar) with no border or minimal violet accent underline.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Top bar: hamburger menu icon (left) + 'Blobby AI' title (center) + settings icon (right)"
        ]
      },
      "acceptanceCriteria": [
        "Top bar renders with three zones: left hamburger, center title, right settings icon",
        "Title reads 'Blobby AI' centered",
        "Hamburger icon is tappable and triggers the sidebar drawer",
        "Settings icon is present on the right"
      ]
    },
    {
      "id": "REQ-14",
      "text": "Implement a slide-in sidebar drawer for chat history. It must be hidden by default (off-screen left), and slide in smoothly when the hamburger menu icon is tapped. It must show the list of past chat sessions (reusing existing session data and logic from the current Sidebar component), a 'New Chat' button, and a close/dismiss control. Tapping outside the drawer or pressing close must slide it back out. The drawer must overlay the main content with a semi-transparent dark backdrop.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Chat history: Move to a slide-in sidebar drawer (hidden by default, opens when hamburger menu tapped)"
        ]
      },
      "acceptanceCriteria": [
        "Sidebar drawer is not visible on initial render",
        "Tapping hamburger icon causes drawer to slide in from the left with smooth CSS transition",
        "Drawer lists all existing chat sessions",
        "Tapping a session closes the drawer and loads that session",
        "A semi-transparent backdrop covers the main content while the drawer is open",
        "Tapping the backdrop or a close button dismisses the drawer"
      ]
    },
    {
      "id": "REQ-15",
      "text": "Redesign the welcome/home screen (shown when no chat session is active) as a vertically centered single-column layout. It must display: (1) the Blobby mascot image centered at 100×100px with a continuous slow vertical floating animation (translateY oscillation, ~3s cycle, ease-in-out infinite); (2) the heading 'What can I help with?' in bold white text below the mascot; (3) the four suggestion prompt cards arranged in a 2×2 grid centered on screen. The existing prompt card click behavior (populate and submit) must be preserved.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Floating BlobbyLogo mascot centered, 100x100px, with slow floating animation",
          "Title: 'What can I help with?' bold white text centered",
          "4 suggestion cards in 2x2 grid centered"
        ]
      },
      "acceptanceCriteria": [
        "Welcome content is vertically and horizontally centered in the main area",
        "Blobby mascot image renders at 100×100px",
        "Mascot has a slow, smooth looping float animation (no abrupt jumps)",
        "Heading text reads 'What can I help with?' in bold white",
        "Four suggestion cards are displayed in a 2-column, 2-row grid",
        "Clicking a suggestion card populates and submits the message as before"
      ]
    },
    {
      "id": "REQ-16",
      "text": "Redesign the bottom message input bar to span the full width of the screen. The placeholder text must read 'Message Blobby AI...'. The input bar must be pinned to the bottom of the viewport. Retain all existing functionality: attach file icon, upload image icon, send button, Enter-to-send, Shift+Enter for newline, loading state with 3-dot animation, and image thumbnail preview above the bar.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Bottom input bar full width: 'Message Blobby AI...' placeholder"
        ]
      },
      "acceptanceCriteria": [
        "Input bar stretches the full width of the screen",
        "Placeholder text is 'Message Blobby AI...'",
        "Bar is pinned/fixed to the bottom of the viewport",
        "All existing input actions (file attach, image upload, send, Enter key) continue to work",
        "Loading animation displays correctly while AI is responding"
      ]
    },
    {
      "id": "REQ-17",
      "text": "When a chat session is active (messages exist), the main area must switch from the welcome screen to a full-height scrollable chat message list. The chat messages must render from top to bottom in the space between the top bar and the bottom input bar. The existing ChatMessage component styling (right-aligned user bubbles, left-aligned assistant cards with violet glow, task-type badges, markdown rendering) must be preserved unchanged.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Do not change AI functionality at all"
        ]
      },
      "acceptanceCriteria": [
        "When messages exist, the welcome screen is hidden and the message list is shown",
        "Message list scrolls vertically within the space between top bar and input bar",
        "User messages appear right-aligned with indigo bubble",
        "Assistant messages appear left-aligned with violet glow card",
        "Task-type pill badges remain visible on assistant messages",
        "Markdown content renders correctly"
      ]
    },
    {
      "id": "REQ-18",
      "text": "For App/Game Build previews (HTML iframe output), instead of opening a right panel, display the generated preview in a full-screen modal or bottom sheet overlay that appears on top of the chat. Include the existing 'Download HTML' button and a close button to dismiss the overlay and return to the chat view.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Remove the 3-panel layout completely",
          "Do not change AI functionality at all"
        ]
      },
      "acceptanceCriteria": [
        "No right-side preview panel exists in the new layout",
        "AppBuild/GameBuild iframe previews open in a full-screen overlay or modal",
        "'Download HTML' button is accessible within the overlay",
        "A close button dismisses the overlay and returns to the chat"
      ]
    },
    {
      "id": "REQ-19",
      "text": "Apply the updated color scheme throughout the redesigned layout: background #0D0D0D, primary violet accent #7C3AED, white body text. Suggestion cards must use dark surface cards with a subtle violet border or glow. All animations (floating mascot, drawer slide, fade-ins) must be smooth and professional. Maintain the Inter font throughout.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Keep dark theme #0D0D0D and violet #7C3AED accents"
        ]
      },
      "acceptanceCriteria": [
        "Page background is #0D0D0D",
        "Violet accent #7C3AED is used for interactive elements, borders, and glows",
        "Text is legible white/light on the dark background",
        "Inter font is used throughout",
        "All transitions and animations are smooth with no jarring jumps"
      ]
    }
  ],
  "constraints": [
    "Do not modify any AI service logic in aiService.ts, taskClassifier.ts, or related utility files",
    "Do not change the Puter.js integration or model routing",
    "Do not alter ChatMessage.tsx styling or markdown rendering behavior",
    "Do not edit files under frontend/src/hooks/ (immutable paths)",
    "Do not edit files under frontend/src/components/ui/ (immutable paths)",
    "Preserve all backend chat session and message persistence logic unchanged"
  ],
  "nonGoals": [
    "Changing AI model selection or task classification logic",
    "Modifying the backend Motoko actor",
    "Altering the onboarding screen flow or localStorage flag logic",
    "Changing Internet Identity authentication behavior",
    "Adding new AI capabilities or prompt types beyond the existing four suggestion cards"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}